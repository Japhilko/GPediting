roxygen2::roxygenise()
library(GPediting)
ls()
openquestfreq
library(GPediting)
openquestfreq
?openquestfreq
x <- c("4,5","4.5","nein","einmal","ein halbes Jahr")
ind <- grep("-",x)
x_0 <- x[-ind]
xex <- stringr::str_extract(x_0, "[[:digit:]]+")
x[-ind] <- xex
x[agrep("nein",x)] <- 0
x[agrep("ein",x)] <- 1
x
x <- c("4,5","4.5","nein","einmal","ein halbes Jahr")
ind <- grep("-",x)
x_0 <- x[-ind]
xex <- stringr::str_extract(x_0, "[[:digit:]]+")
x[-ind] <- xex
x
x[agrep("nein",x)] <- 0
x[agrep("ein",x)] <- 1
x
x <- c("4,5","4.5","nein","einmal","ein halbes Jahr")
ind <- grep("-",x)
x_0 <- x[-ind]
xex <- stringr::str_extract(x_0, "[[:digit:]]+")
x[-ind] <- xex
x[grep("nein",x)] <- 0
x[agrep("ein",x)] <- 1
x
x <- c("4,5","4.5","nein","einmal","ein halbes Jahr","ja")
ind <- grep("-",x)
x_0 <- x[-ind]
xex <- stringr::str_extract(x_0, "[[:digit:]]+")
x[-ind] <- xex
x[grep("nein",x)] <- 0
x[agrep("ein",x)] <- 1
x[grep("ja",x)] <- 1
x
x <- c("4,5","4.5","nein","einmal","ein halbes Jahr","ja","JA")
ind <- grep("-",x)
x_0 <- x[-ind]
xex <- stringr::str_extract(x_0, "[[:digit:]]+")
x[-ind] <- xex
x[grep("nein",x)] <- 0
x[agrep("ein",x)] <- 1
x[grep("ja",x)] <- 1
x
x <- c("4,5","4.5","nein","einmal","ein halbes Jahr","ja","JA")
x <- tolower(x)
ind <- grep("-",x)
x_0 <- x[-ind]
xex <- stringr::str_extract(x_0, "[[:digit:]]+")
x[-ind] <- xex
x[grep("nein",x)] <- 0
x[agrep("ein",x)] <- 1
x[grep("ja",x)] <- 1
x
x <- c("4,5","4.5","nein","einmal","ein halbes Jahr","ja","JA","02.3")
x <- tolower(x)
ind <- grep("-",x)
x_0 <- x[-ind]
xex <- stringr::str_extract(x_0, "[[:digit:]]+")
x[-ind] <- xex
x[grep("nein",x)] <- 0
x[agrep("ein",x)] <- 1
x[grep("ja",x)] <- 1
x[agrep("zwei",x)] <- 2
x[agrep("drei",x)] <- 3
x[agrep("zehn",x)] <- 10
x <- stringr::str_replace_all(x, "[[a-z]]", "")
x <- stringr::str_replace_all(x, "[[A-Z]]", "")
x <- gsub("[(]","",x)
x <- gsub("[)]","",x)
x <- gsub("[*]","",x)
x <- gsub("[%]","",x)
x <- gsub("[/]","",x)
x <- gsub(",",".",x)
x_1 <-  x[!(x%in%c(-77,-99,-88,-111))]
x1 <- strsplit(x_1,split = "-")
x2 <- unlist(lapply(x1,function(x_)mean(as.numeric(x_),na.rm=T)))
xfin <- as.numeric(x)
xfin[!(x%in%c(-77,-99,-88,-111))] <- x2
xfin[is.na(xfin)] <- 0
xfin
x <- c("4,5","4.5","nein","einmal","ein halbes Jahr","ja","JA","02.3.")
x <- tolower(x)
ind <- grep("-",x)
x_0 <- x[-ind]
xex <- stringr::str_extract(x_0, "[[:digit:]]+")
x[-ind] <- xex
x[grep("nein",x)] <- 0
x[agrep("ein",x)] <- 1
x[grep("ja",x)] <- 1
x[agrep("zwei",x)] <- 2
x[agrep("drei",x)] <- 3
x[agrep("zehn",x)] <- 10
x <- stringr::str_replace_all(x, "[[a-z]]", "")
x <- stringr::str_replace_all(x, "[[A-Z]]", "")
x <- gsub("[(]","",x)
x <- gsub("[)]","",x)
x <- gsub("[*]","",x)
x <- gsub("[%]","",x)
x <- gsub("[/]","",x)
x <- gsub(",",".",x)
x_1 <-  x[!(x%in%c(-77,-99,-88,-111))]
x1 <- strsplit(x_1,split = "-")
x2 <- unlist(lapply(x1,function(x_)mean(as.numeric(x_),na.rm=T)))
xfin <- as.numeric(x)
xfin[!(x%in%c(-77,-99,-88,-111))] <- x2
xfin[is.na(xfin)] <- 0
xfin
